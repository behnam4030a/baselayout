/**
 * Modal Component Styles
 * کامپوننت مودال (Modal) - استایل‌ها
 *
 * این فایل شامل تمام استایل‌های کامپوننت Modal است
 * مطابق با Design Tokens استخراج شده از Figma
 *
 * ساختار HTML:
 * <div class="modal" id="my-modal">
 *   <div class="modal__overlay"></div>
 *   <div class="modal__container">
 *     <div class="modal__header">
 *       <div class="modal__title-block">
 *         <div class="modal__icon-holder"><svg>...</svg></div>
 *         <h2 class="modal__title">عنوان مودال</h2>
 *       </div>
 *       <button class="modal__close" type="button" aria-label="بستن">
 *         <svg>...</svg>
 *       </button>
 *     </div>
 *     <div class="modal__body">
 *       <div class="modal__content">...</div>
 *       <div class="modal__actions">
 *         <button class="btn btn--primary btn--large" style="width:100%">تایید</button>
 *       </div>
 *     </div>
 *   </div>
 * </div>
 */

/* ==========================================
   CSS Custom Properties (Design Tokens)
   ========================================== */

:root {
  /* --- Overlay --- */
  --modal-overlay-start: rgba(0, 0, 0, 0.05);
  --modal-overlay-end: rgba(34, 35, 35, 0.3);

  /* --- Header --- */
  --modal-header-bg: var(--neutral-880);
  --modal-header-fg: var(--neutral-0);
  --modal-icon-holder-bg: var(--neutral-840);
  --modal-icon-holder-stroke: var(--neutral-740);
  --modal-close-color: var(--neutral-0);

  /* --- Body --- */
  --modal-body-bg: var(--neutral-0);
  --modal-body-fg: var(--neutral-880);
  --modal-body-fg-secondary: var(--neutral-660);
  --modal-body-fg-tertiary: var(--neutral-360);
  --modal-body-stroke: var(--neutral-100);

  /* --- Divider --- */
  --modal-divider-stroke: var(--neutral-100);
  --modal-divider-fg: var(--neutral-660);

  /* --- Brand (buttons) --- */
  --modal-brand-bg: var(--brand-400);
  --modal-brand-stroke: var(--brand-600);
  --modal-brand-fg: var(--neutral-0);

  /* --- Required --- */
  --modal-required: var(--cranberry-500);

  /* --- Radius --- */
  --modal-radius-container: 8px;
  --modal-radius-body: 8px;
  --modal-radius-icon-holder: 8px;

  /* --- Shadow --- */
  --modal-shadow: -3px 0px 5px 0px rgba(0, 0, 0, 0.1);

  /* --- Spacing --- */
  --modal-container-padding: 4px;
  --modal-header-padding: 24px;
  --modal-body-padding: 24px;
  --modal-body-gap: 24px;
  --modal-content-gap: 16px;
  --modal-field-gap: 8px;
  --modal-icon-title-gap: 16px;

  /* --- Size --- */
  --modal-width: 500px;
  --modal-close-size: 24px;
  --modal-icon-holder-size: 54px;
  --modal-icon-size: 26px;
  --modal-border-width: 1px;

  /* --- Animation --- */
  --modal-animation-duration: 300ms;
}

/* ==========================================
   Base
   ========================================== */

.modal {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 9000;
}

.modal--open {
  display: block;
}

/* ==========================================
   Centered Variant (modal--centered)
   ========================================== */

.modal--centered.modal--open {
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal--centered .modal__overlay {
  background: linear-gradient(to bottom, var(--modal-overlay-start) 20%, var(--modal-overlay-end));
}

.modal--centered .modal__container {
  position: relative;
  top: auto;
  right: auto;
  bottom: auto;
  max-height: calc(100vh - 32px);
  animation-name: modal-center-in;
}

.modal--centered.modal--closing .modal__container {
  animation-name: modal-center-out;
}

/* ==========================================
   Overlay
   ========================================== */

.modal__overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(to right, var(--modal-overlay-start), var(--modal-overlay-end));
  animation: modal-fade-in var(--modal-animation-duration) ease forwards;
}

.modal--closing .modal__overlay {
  animation: modal-fade-out var(--modal-animation-duration) ease forwards;
}

/* ==========================================
   Container
   ========================================== */

.modal__container {
  position: absolute;
  top: 16px;
  right: 16px;
  bottom: 16px;
  width: var(--modal-width);
  max-width: calc(100vw - 32px);
  background: var(--modal-header-bg);
  padding: var(--modal-container-padding);
  border-radius: var(--modal-radius-container);
  box-shadow: var(--modal-shadow);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: modal-slide-in-right var(--modal-animation-duration) ease forwards;
  z-index: 1;
}

.modal--closing .modal__container {
  animation: modal-slide-out-right var(--modal-animation-duration) ease forwards;
}

/* --- Size Variants --- */

.modal--sm {
  --modal-width: 400px;
}

/* .modal--md is the default (500px) */

.modal--lg {
  --modal-width: 600px;
}

/* ==========================================
   Header
   ========================================== */

.modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--modal-header-padding);
  flex-shrink: 0;
  overflow: hidden;
}

.modal__title-block {
  display: flex;
  align-items: center;
  gap: var(--modal-icon-title-gap);
}

.modal__title-wrap {
  display: flex;
  flex-direction: column;
}

.modal__title {
  font-family: var(--typo-font-family);
  font-size: var(--typo-heading-4-size);
  font-weight: var(--typo-heading-4-weight);
  line-height: var(--typo-heading-4-line-height);
  color: var(--modal-header-fg);
  margin: 0;
}

.modal__subtitle {
  font-family: var(--typo-font-family);
  font-size: var(--typo-body-medium-200-size);
  font-weight: var(--typo-body-medium-200-weight);
  line-height: var(--typo-body-medium-200-line-height);
  color: var(--neutral-180);
  margin: 0;
}

.modal__icon-holder {
  width: var(--modal-icon-holder-size);
  height: var(--modal-icon-holder-size);
  min-width: var(--modal-icon-holder-size);
  background: var(--modal-icon-holder-bg);
  border: var(--modal-border-width) solid var(--modal-icon-holder-stroke);
  border-radius: var(--modal-radius-icon-holder);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.modal__icon-holder svg {
  width: var(--modal-icon-size);
  height: var(--modal-icon-size);
  color: var(--modal-header-fg);
}

.modal__close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--modal-close-size);
  height: var(--modal-close-size);
  min-width: var(--modal-close-size);
  background: none;
  border: none;
  cursor: pointer;
  color: var(--modal-close-color);
  padding: 0;
  transition: opacity 0.15s ease;
}

.modal__close:hover {
  opacity: 0.7;
}

.modal__close svg {
  width: 100%;
  height: 100%;
}

/* ==========================================
   Body
   ========================================== */
.modal__body {
    flex: 1;
    min-height: 0;
    background: var(--modal-body-bg);
    padding: var(--modal-body-padding);
    border-radius: var(--modal-radius-body);
    display: flex;
    flex-direction: column;
    gap: var(--modal-body-gap);
    overflow-y: auto;
    justify-content: space-between;
}
.modal__content {
  display: flex;
  flex-direction: column;
  gap: var(--modal-content-gap);
  align-items: flex-end;
}

/* Custom scrollbar */
.modal__body::-webkit-scrollbar {
  width: 5px;
}

.modal__body::-webkit-scrollbar-track {
  background: transparent;
}

.modal__body::-webkit-scrollbar-thumb {
  background: var(--neutral-140);
  border-radius: 3px;
}

.modal__actions {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  width: 100%;
}

/* ==========================================
   Expanded Panel
   ========================================== */

.modal__expanded {
  position: absolute;
  top: 16px;
  bottom: 16px;
  right: calc(16px + var(--modal-width));
  width: var(--modal-width);
  padding: 8px 0;
  display: none;
  flex-direction: column;
  overflow: hidden;
  z-index: 0;
}

.modal__expanded--open {
  display: flex;
}

.modal__expanded-inner {
  flex: 1;
  min-height: 0;
  background: var(--modal-body-bg);
  border-radius: var(--modal-radius-body) 0 0 var(--modal-radius-body);
  box-shadow: var(--modal-shadow);
  display: flex;
  flex-direction: column;
  gap: var(--modal-body-gap);
  padding: var(--modal-body-padding);
  overflow: hidden;
  animation: modal-expanded-slide-in var(--modal-animation-duration) ease forwards;
}

.modal__expanded--closing .modal__expanded-inner {
  animation: modal-expanded-slide-out var(--modal-animation-duration) ease forwards;
}

.modal__expanded-header {
  display: flex;
  flex-direction: column;
  gap: 16px;
  flex-shrink: 0;
}

.modal__expanded-title {
  font-family: var(--typo-font-family);
  font-size: var(--typo-heading-5-size);
  font-weight: var(--typo-heading-5-weight);
  line-height: var(--typo-heading-5-line-height);
  color: var(--modal-body-fg);
  margin: 0;
}

.modal__expanded-content {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Custom scrollbar */
.modal__expanded-content::-webkit-scrollbar {
  width: 5px;
}

.modal__expanded-content::-webkit-scrollbar-track {
  background: transparent;
}

.modal__expanded-content::-webkit-scrollbar-thumb {
  background: var(--neutral-140);
  border-radius: 3px;
}

.modal__expanded-footer {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  gap: 16px;
}
/* --- Form field styles for modal demo content --- */
.modal-field {
  display: flex;
  flex-direction: column;
  gap: var(--modal-field-gap);
  width: 100%;
}

.modal-field__label {
  font-family: var(--typo-font-family);
  font-size: 12px;
  font-weight: 400;
  line-height: 1.5;
  color: var(--modal-body-fg);
  text-align: right;
}

.modal-field__label--required::after {
  content: ' *';
  color: var(--modal-required);
  font-size: 13px;
}

.modal-field__input {
  width: 100%;
  height: 45px;
  border: var(--modal-border-width) solid var(--modal-body-stroke);
  border-radius: var(--modal-radius-body);
  padding: 0 16px;
  font-family: var(--typo-font-family);
  font-size: 14px;
  font-weight: 400;
  line-height: 2;
  color: var(--modal-body-fg);
  background: var(--modal-body-bg);
  direction: rtl;
  text-align: right;
  outline: none;
  transition: border-color 0.15s ease;
}

.modal-field__input::placeholder {
  color: var(--modal-body-fg-secondary);
}

.modal-field__input:focus {
  border-color: var(--modal-brand-bg);
}

.modal-divider {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 0;
  flex-direction: row-reverse;
}

.modal-divider__line {
  flex: 1;
  height: 1px;
  background: var(--modal-divider-stroke);
}

.modal-divider__text {
  font-family: var(--typo-font-family);
  font-size: 13px;
  font-weight: 400;
  line-height: 1.3;
  color: var(--modal-divider-fg);
  white-space: nowrap;
}

/* --- Expanded panel list items --- */
.expanded-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--neutral-20);
  border-radius: var(--modal-radius-body);
  cursor: pointer;
  transition: background 0.15s ease;
}

.expanded-item:hover {
  background: var(--neutral-60);
}

.expanded-item--selected {
  background: var(--brand-5);
}

.expanded-item--selected:hover {
  background: var(--brand-10);
}

.expanded-item__name {
  font-family: var(--typo-font-family);
  font-size: 14px;
  font-weight: 400;
  line-height: 1.6;
  color: var(--modal-body-fg);
}

.expanded-item__check {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}
/* ==========================================
   Animations
   ========================================== */

@keyframes modal-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes modal-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes modal-slide-in-right {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes modal-slide-out-right {
  from { transform: translateX(0); }
  to { transform: translateX(100%); }
}

@keyframes modal-slide-in-bottom {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

@keyframes modal-slide-out-bottom {
  from { transform: translateY(0); }
  to { transform: translateY(100%); }
}

@keyframes modal-expanded-slide-in {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes modal-expanded-slide-out {
  from { transform: translateX(0); }
  to { transform: translateX(100%); }
}

@keyframes modal-center-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes modal-center-out {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(0.95); }
}

/* ==========================================
   Mobile (< 768px)
   ========================================== */

@media (max-width: 767px) {
  .modal__container {
    top: 8px;
    right: 8px;
    bottom: 8px;
    max-width: calc(100vw - 16px);
  }

  .modal__expanded {
    top: 8px;
    right: 8px;
    bottom: 8px;
    padding: 0;
    z-index: 2;
    max-width: calc(100vw - 16px);
  }

  .modal__expanded-inner {
    border-radius: var(--modal-radius-container);
    box-shadow: none;
  }

  .modal__header {
    padding: 24px 16px;
  }

  .modal__title {
    font-size: var(--typo-heading-5-size);
    font-weight: var(--typo-heading-5-weight);
    line-height: var(--typo-heading-5-line-height);
  }

  .modal__title-wrap {
    gap: 4px;
  }

  .modal__subtitle {
    line-height: var(--typo-body-medium-150-line-height);
  }

  .modal__body {
    padding: 16px;
  }

  /* --- Centered on mobile --- */
  .modal--centered .modal__container {
    top: auto;
    right: auto;
    bottom: auto;
    left: auto;
    width: var(--modal-width);
    max-width: calc(100% - 16px);
    animation-name: modal-center-in;
  }

  .modal--centered.modal--closing .modal__container {
    animation-name: modal-center-out;
  }
}

/* ==========================================
   Body Scroll Lock
   ========================================== */

body.modal-body-locked {
  overflow: hidden;
}
